---
title: "R Markdown Einführung"
author: "Tim Schäfer"
date: "2019-05-28"
output: html_document
---

## What is *RMarkdown* and how can it help me?

An R Markdown (Rmd) document contains visualizations of statistical results along with the source code used to create them.

This enables:

* Dcoumented and reproducible workflow: When the data changes, all you have to do is re-run the file to get the new results and figures.
* Sharing: One can send the output document to colleagues, who can use it to see the results AND understand the methods.

(If they want to run the analysis, they also need the data of course, but they do not have to do that.)

## How does it work?

Technically an Rmd document is a simple text file containing sections. Each section is can be one of the following 3 types:

* document metadata (in YAML-Format), like author information and desired output format.
* R source code (or code in some other supported languages)
* comments and explanations written in plain text

The Rmd file is a **source document** that needs to be transformed (*knitted*) to produce the **output document**. During the knitting, the contained
R source code is executed, plots and figures are produced and saved as images, control sequences in the text (e.g., equations like $F(x) = \int^a_b \frac{1}{3}x^3$ or control sequences like \* for *italics* orr \*\* for **bold face**) are interpreted, and everything is embedded into the output document:


![**Fig 1**: Knitting a source document to create output documents in different formats.](doc_to_output.png)

## What does an Rmd file look like?

Like a normal R script, but with additional blocks or sections. Here is an example document starting with a metadata section:

    ---
    title: "R Markdown Introduction"
    author: "Tim Schäfer"
    date: "2021-08-23"
    output: html_document
    ---

This can be followed by some text, maybe *in italics* or **bold**. Then some R code.


There are some easy control characters which can be found in the Markdown Cheat Sheet linked below.

**Note**: To use a control character without its special meaning, one has to escape it. The escape character is backslash, so entering \\\* in your markdown code produces \* in the output document.


#### IMPORTANT for the following examples

**To understand how to insert R code, you should now open this Rmd file (`rmarkdown_intro.Rmd`) in rstudio or any text editor[^1].**


## Installation

    install.packages("rmarkdown")
    

## An Example

The following block consists of R code that will be run when we knit the document:


```{r}
fit = lm(dist ~ speed, data = cars)
b = coef(fit)
plot(cars)
abline(fit)
```

The resulting plot will be embedded into the output document. One can re-use the variables in following code sections, of course. Therefore I can tell you here that:

The slope of the regression line in the plot above is `r b[1]`.

## Integration in rstudio

RMarkdown works especially well with [rstudio](https://rstudio.com/). It is very easy to create Markdown document, add different blocks, knit a single block, several blocks, or the whole document, and view the resulting output (so-called *Notebook-Interface*, similar to Jupyter-Notebook for Python or the Matlab *Live Scripts*.).

Alternatively, it is of course possible to produce the Rmd documents with any text editor. The knitting can also be accomplished on the command line:

`R -e rmarkdown::render"('rmarkdown_intro.Rmd', output_file='markdown_intro.html')"`


## Welche Ausgabeformate gibt es?

Sehr viele, denn unter der Haube wird [Pandoc](https://pandoc.org/) benutzt. Die gebräuchlichsten sind wohl PDF, HTML, und Word. Es gibt aber sehr viele Möglichkeiten, und wenn man sich mehr damit beschäftigt, kann man z.B. Literaturdatenbanken ansprechen, Präsentationsfolien erzeugen lassen, oder ganze Bücher oder wissenschaftliche Artikel über LaTeX setzen lassen.

Das Ausgabeformat wird in den Metadaten festgelegt, für HTML z.B. sieht das so aus:

`output: html_document`

## Grenzen von RMarkdown


* Oft ist eine Vorverarbeitung oder Zwischenschritte mit anderer Software nötig und man hat eine Sammlung von Skripten, die in der richtigen Reihenfolge und evtl. mit manuellen Zwischenschritten ausgeführt werden müssen. Diese Gesamtpipeline sollte daher gut dokumentiert sein, und in den Skripten sollte ersichtlich sein, von welchen Eingabedaten (und eventuell bereits erfolgten Vorverarbeitungsschritten) das Skript ausgeht.
* Die ausgegebenen Dokumente sehen schon sehr gut aus, aber wenn man sie noch weiter im Stil anpassen möchte (oder muss) sind eventuell erweiterte Kenntnisse nötig und es kann schnell technisch werden.

## Nützliche Ressourcen

* Die offizielle Hilfe unter [rmarkdown.rstudio.com/](https://rmarkdown.rstudio.com/)
* [Das R Markdown Cheat Sheet](https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf)

### Credits

Die Beispiele in diesem Dokument entstammen der offiziellen Hilfe zu RMarkdown. An diese ist auch der Rest des Dokuments angelehnt.

[^1]: Use a good one with line numbers and syntax highlighting for Markdown, like [Atom](https://atom.io/).